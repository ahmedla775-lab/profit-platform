
<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Ù…Ù†ØµØ© Ø§Ù„Ø£Ø±Ø¨Ø§Ø­</title>
<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700&display=swap" rel="stylesheet">

<style>
body { margin:0; font-family:'Cairo', sans-serif; background:#0F172A; color:#F8FAFC;}
header { background:#1E293B; padding:20px; text-align:center; font-size:24px; font-weight:700; }
.container { padding:20px; display:grid; gap:20px; }
.card { background: rgba(30,41,59,0.8); border-radius:16px; padding:20px; box-shadow:0 0 20px rgba(16,185,129,0.3); transition:transform 0.2s;}
.card:hover { transform:translateY(-5px);}
.balance { font-size:28px; font-weight:700; color:#10B981; }
input, button { width:100%; padding:12px; margin-top:10px; border-radius:12px; border:none; font-size:16px;}
button.primary { background:#10B981; color:#fff;}
button.secondary { background:#F59E0B; color:#000;}
button:active { transform:scale(0.95);}
.hidden { display:none; }
</style>
</head>
<body>

<header>ðŸ’Ž Ù…Ù†ØµØ© Ø§Ù„Ø£Ø±Ø¨Ø§Ø­</header>

<div class="container">

  <!-- ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ -->
  <div class="card" id="auth-card">
    <h3>ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ / Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨</h3>
    <input type="email" id="email" placeholder="Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ">
    <input type="password" id="password" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±">
    <button class="primary" onclick="signup()">Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨</button>
    <button class="secondary" onclick="login()">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</button>
  </div>

  <!-- Ø§Ù„Ù…Ù†ØµØ© -->
  <div id="platform" class="hidden">
    <div class="card">
      <div>Ø±ØµÙŠØ¯Ùƒ Ø§Ù„Ø­Ø§Ù„ÙŠ</div>
      <div class="balance" id="balance">0.00 Ø¯Ø¬</div>
      <button class="secondary" onclick="logout()">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬</button>
    </div>

    <div class="card">
      <div>Ù…Ù‡Ù…Ø© Ø§Ù„ÙŠÙˆÙ…</div>
      <p>Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ Ø§Ù„Ø²Ø± Ù„Ø¥ØªÙ…Ø§Ù… Ø§Ù„Ù…Ù‡Ù…Ø©</p>
      <button class="primary" onclick="completeTask()">Ø¥ØªÙ…Ø§Ù… Ø§Ù„Ù…Ù‡Ù…Ø©</button>
    </div>
  </div>

</div>

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

<script>
const firebaseConfig = {
  apiKey: "Ø¶Ø¹ Ù‡Ù†Ø§ apiKey",
  authDomain: "Ø¶Ø¹ Ù‡Ù†Ø§ authDomain",
  projectId: "Ø¶Ø¹ Ù‡Ù†Ø§ projectId",
  storageBucket: "Ø¶Ø¹ Ù‡Ù†Ø§ storageBucket",
  messagingSenderId: "Ø¶Ø¹ Ù‡Ù†Ø§ messagingSenderId",
  appId: "Ø¶Ø¹ Ù‡Ù†Ø§ appId"
};

firebase.initializeApp(firebaseConfig);
const auth = firebase.auth();
const db = firebase.firestore();

let user = null;

// ØªØ­Ø¯ÙŠØ« ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù…Ù†ØµØ©
function updateUI(balance=0){
  document.getElementById("balance").innerText = balance.toFixed(2)+" Ø¯Ø¬";
  if(user){
    document.getElementById("auth-card").classList.add("hidden");
    document.getElementById("platform").classList.remove("hidden");
  } else {
    document.getElementById("auth-card").classList.remove("hidden");
    document.getElementById("platform").classList.add("hidden");
  }
}

// Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨
function signup(){
  const email = document.getElementById("email").value;
  const password = document.getElementById("password").value;
  auth.createUserWithEmailAndPassword(email,password)
    .then(cred => {
      user = cred.user;
      db.collection("users").doc(user.uid).set({balance:0});
      updateUI(0);
      alert("ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø­Ø³Ø§Ø¨ Ø¨Ù†Ø¬Ø§Ø­ âœ…");
    })
    .catch(err=>alert(err.message));
}

// ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„
function login(){
  const email = document.getElementById("email").value;
  const password = document.getElementById("password").value;
  auth.signInWithEmailAndPassword(email,password)
    .then(cred => {
      user = cred.user;
      db.collection("users").doc(user.uid).get()
        .then(doc => {
          updateUI(doc.data().balance);
        });
    })
    .catch(err=>alert(err.message));
}

// ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬
function logout(){
  auth.signOut().then(()=>{ user=null; updateUI(0); });
}

// Ø¥ØªÙ…Ø§Ù… Ù…Ù‡Ù…Ø© Ø§Ù„ÙŠÙˆÙ…
function completeTask(){
  const docRef = db.collection("users").doc(user.uid);
  docRef.get().then(doc=>{
    let current = doc.data().balance;
    current +=50;
    docRef.update({balance:current});
    updateUI(current);
    alert("âœ… ØªÙ…Øª Ø¥Ø¶Ø§ÙØ© 50 Ø¯Ø¬ Ø¥Ù„Ù‰ Ø±ØµÙŠØ¯Ùƒ");
  });
}

// ØªØ­Ø¯ÙŠØ« Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
auth.onAuthStateChanged(u=>{
  if(u){
    user=u;
    db.collection("users").doc(user.uid).get().then(doc=>updateUI(doc.data().balance));
  } else {
    user=null;
    updateUI(0);
  }
});
</script>

</body>
</html>
