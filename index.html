
<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Ù…Ù†ØµØ© Ø§Ù„Ø£Ø±Ø¨Ø§Ø­ Ø§Ù„Ù…ØªÙƒØ§Ù…Ù„Ø©</title>
<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700&display=swap" rel="stylesheet">

<!-- Chart.js Ù„Ù„Ø±Ø³Ù… Ø§Ù„Ø¨ÙŠØ§Ù†ÙŠ -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>
body {
  margin:0; font-family:'Cairo', sans-serif; background:#0F172A; color:#F8FAFC;
}
header {
  background:#1E293B; padding:20px; text-align:center; font-size:24px; font-weight:700;
  box-shadow:0 4px 10px rgba(0,0,0,0.5);
}
.container { padding:20px; display:grid; gap:20px; }
.card {
  background: rgba(30,41,59,0.7); backdrop-filter: blur(12px); border-radius:16px; padding:20px;
  box-shadow:0 0 20px rgba(16,185,129,0.3); transition: transform 0.2s;
}
.card:hover { transform: translateY(-5px); }
.balance { font-size:28px; font-weight:700; color:#10B981; }
input, button { width:100%; padding:12px; margin-top:10px; border-radius:12px; border:none; font-size:16px;}
button.primary { background:linear-gradient(to right,#10B981,#06b370); color:#fff; box-shadow:0 0 15px rgba(16,185,129,0.6);}
button.secondary { background:linear-gradient(to right,#F59E0B,#FBBF24); color:#000; box-shadow:0 0 15px rgba(245,158,11,0.6);}
button:active { transform:scale(0.95);}
.hidden { display:none; }
.task-btn, .level-btn { margin-top:5px; }
.icon-btn { display:inline-block; margin:5px; padding:8px 12px; background:#1E293B; border-radius:50%; cursor:pointer; box-shadow:0 0 10px #3B82F6; color:#fff; font-size:18px;}
.gradient-text { background: linear-gradient(to right,#10B981,#06b370); -webkit-background-clip: text; color:transparent;}
</style>
</head>
<body>

<header>ğŸ’ Ù…Ù†ØµØ© Ø§Ù„Ø£Ø±Ø¨Ø§Ø­ Ø§Ù„Ù…ØªÙƒØ§Ù…Ù„Ø©</header>

<div class="container">

  <!-- ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ -->
  <div class="card" id="auth-card">
    <h3>ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ / Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨</h3>
    <input type="email" id="email" placeholder="Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ">
    <input type="password" id="password" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±">
    <button class="primary" onclick="signup()">Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨</button>
    <button class="secondary" onclick="login()">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</button>
  </div>

  <!-- Ø§Ù„Ù…Ù†ØµØ© -->
  <div id="platform" class="hidden">

    <div class="card">
      <div>Ø±ØµÙŠØ¯Ùƒ Ø§Ù„Ø­Ø§Ù„ÙŠ</div>
      <div class="balance" id="balance">0.00 Ø¯Ø¬</div>
      <button class="secondary" onclick="logout()">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬</button>
    </div>

    <!-- Ø£ÙŠÙ‚ÙˆÙ†Ø§Øª Ø§Ù„ØªØ¹Ù„ÙŠÙ…Ø§Øª ÙˆØ®Ø¯Ù…Ø© Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ -->
    <div class="card">
      <span class="icon-btn" onclick="showInstructions()">â„¹ï¸</span>
      <span class="icon-btn" onclick="window.open('https://chat.whatsapp.com/Cyu9IkkA8INASNJCV871J6','_blank')">ğŸ’¬</span>
    </div>

    <!-- Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ù…Ø³ØªÙˆÙ‰ -->
    <div class="card">
      <div>Ø§Ø®ØªØ± Ø§Ù„Ù…Ø³ØªÙˆÙ‰ Ø£Ùˆ Ø¯ÙØ¹ Ø§Ù„Ø¥ÙŠØ¯Ø§Ø¹</div>
      <div id="levels-container"></div>
    </div>

    <!-- Ù…Ù‡Ø§Ù… Ø§Ù„ÙŠÙˆÙ… -->
    <div class="card">
      <div>Ù…Ù‡Ø§Ù… Ø§Ù„ÙŠÙˆÙ…</div>
      <div id="tasks-container"></div>
    </div>

    <!-- Ø§Ù„Ø³Ø­Ø¨ -->
    <div class="card">
      <div>Ø³Ø­Ø¨ Ø§Ù„Ø±ØµÙŠØ¯</div>
      <input type="number" id="withdraw-amount" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ù„Ù…Ø¨Ù„Øº Ø¨Ø§Ù„Ø¯Ø¬">
      <button class="primary" onclick="withdraw()">Ø³Ø­Ø¨</button>
    </div>

    <!-- Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Ø±Ø³ÙˆÙ… Ø¨ÙŠØ§Ù†ÙŠØ© -->
    <div class="card">
      <canvas id="chart" height="200"></canvas>
    </div>

  </div>

</div>

<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

<script>
// =======================
// Ø¥Ø¹Ø¯Ø§Ø¯ Firebase
// =======================
const firebaseConfig = {
  apiKey: "Ø¶Ø¹ Ù‡Ù†Ø§ apiKey",
  authDomain: "Ø¶Ø¹ Ù‡Ù†Ø§ authDomain",
  projectId: "Ø¶Ø¹ Ù‡Ù†Ø§ projectId",
  storageBucket: "Ø¶Ø¹ Ù‡Ù†Ø§ storageBucket",
  messagingSenderId: "Ø¶Ø¹ Ù‡Ù†Ø§ messagingSenderId",
  appId: "Ø¶Ø¹ Ù‡Ù†Ø§ appId"
};

firebase.initializeApp(firebaseConfig);
const auth = firebase.auth();
const db = firebase.firestore();

let user = null;
let balance = 0;
let balanceHistory = [];

// =======================
// Ø§Ù„Ù…Ø³ØªÙˆÙŠØ§Øª ÙˆØ§Ù„Ø¥ÙŠØ¯Ø§Ø¹
// =======================
const levels = [
  {id:0, name:"ØªØ¬Ø±ÙŠØ¨ÙŠ", deposit:0, daily:50, duration:10},
  {id:1, name:"Ø§Ù„Ù…Ø³ØªÙˆÙ‰ 1", deposit:2500, daily:70, duration:360},
  {id:2, name:"Ø§Ù„Ù…Ø³ØªÙˆÙ‰ 2", deposit:5200, daily:150, duration:360},
  {id:3, name:"Ø§Ù„Ù…Ø³ØªÙˆÙ‰ 3", deposit:20000, daily:500, duration:360},
  {id:6, name:"Ø§Ù„Ù…Ø³ØªÙˆÙ‰ 6", deposit:40000, daily:1100, duration:360},
];

// =======================
// ØªØ­Ø¯ÙŠØ« ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù…Ù†ØµØ©
// =======================
function updateUI(b=0){
  balance = b;
  document.getElementById("balance").innerText = balance.toFixed(2)+" Ø¯Ø¬";
  if(user){
    document.getElementById("auth-card").classList.add("hidden");
    document.getElementById("platform").classList.remove("hidden");
    renderLevels();
    renderTasks();
    renderChart();
  } else {
    document.getElementById("auth-card").classList.remove("hidden");
    document.getElementById("platform").classList.add("hidden");
  }
}

// =======================
// Ø¹Ø±Ø¶ Ø§Ù„Ù…Ø³ØªÙˆÙŠØ§Øª
// =======================
function renderLevels(){
  const container = document.getElementById("levels-container");
  container.innerHTML="";
  levels.forEach(l=>{
    const userLevel = parseInt(localStorage.getItem("user-level-"+user.uid)) || 0;
    container.innerHTML += `
      <div style="margin-bottom:8px;">
        <span>${l.name} - Ø¥ÙŠØ¯Ø§Ø¹: ${l.deposit} Ø¯Ø¬ - Ù…ÙƒØ§ÙØ£Ø© ÙŠÙˆÙ…ÙŠØ©: ${l.daily} Ø¯Ø¬</span>
        <button class="secondary level-btn" onclick="payLevel(${l.id})" ${userLevel>=l.id?"disabled":""}>
          ${userLevel>=l.id?"ØªÙ… Ø§Ù„Ø¯ÙØ¹":"Ø¯ÙØ¹ Ø§Ù„Ø¥ÙŠØ¯Ø§Ø¹"}
        </button>
      </div>
    `;
  });
}

// =======================
// Ø¯ÙØ¹ Ø§Ù„Ø¥ÙŠØ¯Ø§Ø¹
// =======================
function payLevel(levelId){
  const level = levels.find(l=>l.id===levelId);
  if(balance<level.deposit && level.deposit>0){
    alert(`Ø±ØµÙŠØ¯Ùƒ ØºÙŠØ± ÙƒØ§ÙÙ Ù„Ø¯ÙØ¹ Ø§Ù„Ø¥ÙŠØ¯Ø§Ø¹ (${level.deposit} Ø¯Ø¬)`);
    return;
  }
  balance -= level.deposit;
  localStorage.setItem("user-level-"+user.uid, level.id);
  db.collection("users").doc(user.uid).update({balance});
  updateUI(balance);
  alert(`âœ… ØªÙ… Ø¯ÙØ¹ Ø§Ù„Ø¥ÙŠØ¯Ø§Ø¹ Ù„Ù„Ù…Ø³ØªÙˆÙ‰ ${level.name}`);
}

// =======================
// Ø§Ù„Ù…Ù‡Ø§Ù… Ø§Ù„ÙŠÙˆÙ…ÙŠØ© Ù…Ø¹ Ù…Ø¤Ù‚Øª Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªÙØ¹ÙŠÙ„
// =======================
function renderTasks(){
  const container = document.getElementById("tasks-container");
  container.innerHTML="";
  const userLevel = parseInt(localStorage.getItem("user-level-"+user.uid)) || 0;
  const today = new Date().toDateString();

  levels.filter(l=>l.id<=userLevel).forEach(level=>{
    const taskKey = `task-${level.id}-${user.uid}-${today}`;
    const done = localStorage.getItem(taskKey);
    container.innerHTML += `
      <div style="margin-bottom:10px;">
        <span>Ù…Ù‡Ù…Ø© ÙŠÙˆÙ…ÙŠØ© Ù„Ù„Ù…Ø³ØªÙˆÙ‰ ${level.name} (+${level.daily} Ø¯Ø¬)</span>
        <button class="primary task-btn" ${done?"disabled":""} onclick="completeTask(${level.id})">
          ${done?"ØªÙ…":"Ø¥ØªÙ…Ø§Ù… Ø§Ù„Ù…Ù‡Ù…Ø©"}
        </button>
      </div>
    `;
  });
}

function completeTask(levelId){
  const level = levels.find(l=>l.id===levelId);
  const today = new Date().toDateString();
  const taskKey = `task-${level.id}-${user.uid}-${today}`;
  if(localStorage.getItem(taskKey)) return;
  balance += level.daily;
  localStorage.setItem(taskKey,"done");
  balanceHistory.push({date:today,balance});
  db.collection("users").doc(user.uid).update({balance});
  updateUI(balance);
  alert(`âœ… ØªÙ…Øª Ø¥Ø¶Ø§ÙØ© ${level.daily} Ø¯Ø¬`);
}

// Ø¥Ø¹Ø§Ø¯Ø© ØªÙØ¹ÙŠÙ„ Ø§Ù„Ù…Ù‡Ø§Ù… ØªÙ„Ù‚Ø§Ø¦ÙŠÙ‹Ø§ ÙƒÙ„ ÙŠÙˆÙ…
setInterval(()=>{
  const today = new Date().toDateString();
  levels.forEach(level=>{
    const taskKey = `task-${level.id}-${user?.uid}-${today}`;
    if(taskKey && localStorage.getItem(taskKey)) return; // Ù…ÙˆØ¬ÙˆØ¯Ø©
    if(taskKey) localStorage.removeItem(taskKey);
  });
  if(user) renderTasks();
},1000*60*60); // ÙƒÙ„ Ø³Ø§Ø¹Ø© ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„ÙŠÙˆÙ… Ø§Ù„Ø¬Ø¯ÙŠØ¯

// =======================
// Ø§Ù„Ø³Ø­Ø¨
// =======================
function withdraw(){
  const amount = parseInt(document.getElementById("withdraw-amount").value);
  if(amount<1000 || amount>100000){
    alert("âŒ Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ø¯Ù†Ù‰ Ù„Ù„Ø³Ø­Ø¨ 1000 Ø¯Ø¬ ÙˆØ§Ù„Ø­Ø¯ Ø§Ù„Ø£Ø¹Ù„Ù‰ 100000 Ø¯Ø¬");
    return;
  }
  if(amount>balance){
    alert("âŒ Ø±ØµÙŠØ¯Ùƒ ØºÙŠØ± ÙƒØ§ÙÙŠ");
    return;
  }
  const userLevel = parseInt(localStorage.getItem("user-level-"+user.uid)) || 0;
  if(userLevel==0 && balance<2500){
    alert("âŒ Ù„Ø§ ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„Ø³Ø­Ø¨ Ù‚Ø¨Ù„ Ø¯ÙØ¹ Ø§Ù„Ø¥ÙŠØ¯Ø§Ø¹ Ù„Ù„Ù…Ø³ØªÙˆÙ‰ 1 (2500 Ø¯Ø¬)");
    return;
  }
  balance -= amount;
  db.collection("users").doc(user.uid).update({balance});
  updateUI(balance);
  alert(`âœ… ØªÙ… Ø³Ø­Ø¨ ${amount} Ø¯Ø¬`);
}

// =======================
// Ø±Ø³Ù… Ø¨ÙŠØ§Ù†ÙŠ Ù„Ù„Ø±ØµÙŠØ¯
// =======================
function renderChart(){
  const ctx = document.getElementById("chart").getContext('2d');
  const labels = balanceHistory.map(b=>b.date);
  const data = balanceHistory.map(b=>b.balance);
  if(window.myChart) window.myChart.destroy();
  window.myChart = new Chart(ctx,{
    type:'line',
    data:{
      labels,
      datasets:[{
        label:'Ø§Ù„Ø±ØµÙŠØ¯ Ø§Ù„ÙŠÙˆÙ…ÙŠ',
        data,
        borderColor:'#10B981',
        backgroundColor:'rgba(16,185,129,0.2)',
        tension:0.3,
        fill:true
      }]
    },
    options:{
      responsive:true,
      plugins:{legend:{display:true,labels:{color:'#F8FAFC'}}},
      scales:{x:{ticks:{color:'#F8FAFC'}},y:{ticks:{color:'#F8FAFC'}}}
    }
  });
}

// =======================
// Ø£ÙŠÙ‚ÙˆÙ†Ø© Ø§Ù„ØªØ¹Ù„ÙŠÙ…Ø§Øª
// =======================
function showInstructions(){
  alert(`ğŸ“Œ ØªØ¹Ù„ÙŠÙ…Ø§Øª Ø§Ù„Ù…Ø´ØªØ±Ùƒ:
1. ØªØ³Ø¬ÙŠÙ„ Ø­Ø³Ø§Ø¨ Ø¬Ø¯ÙŠØ¯ Ø£Ùˆ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„
2. Ø´Ø­Ù† Ø§Ù„Ø±ØµÙŠØ¯ (USDT Ø£Ùˆ DZD)
   - USDT: 0xbbf80a21171e0d104e0a81a1563eda6294c987d4
   - DZD: 00799999001805498745
3. Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ù…Ø³ØªÙˆÙ‰ ÙˆØ§Ù„Ø¯ÙØ¹ Ù„ØªÙØ¹ÙŠÙ„ Ø§Ù„Ù…Ù‡Ø§Ù…
4. Ø¥ØªÙ…Ø§Ù… Ø§Ù„Ù…Ù‡Ø§Ù… Ø§Ù„ÙŠÙˆÙ…ÙŠØ© Ø­Ø³Ø¨ Ø§Ù„Ù…Ø³ØªÙˆÙ‰
5. Ø§Ù„Ø³Ø­Ø¨ Ø¨ÙŠÙ† 1000 Ùˆ100,000 Ø¯Ø¬ Ø¨Ø¹Ø¯ Ø§Ù„Ø¥ÙŠØ¯Ø§Ø¹ Ø§Ù„Ù…Ù†Ø§Ø³Ø¨
6. Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ù‡Ø§Ù… Ù…ØªÙˆÙØ±Ø© Ø¯Ø§Ø®Ù„ Ø§Ù„Ù…Ù†ØµØ© Ù…Ø¹ Ù…ÙƒØ§ÙØ¢Øª ÙƒÙ„ Ù…Ø³ØªÙˆÙ‰`);
}

// =======================
// ØªØ³Ø¬ÙŠÙ„ Ø­Ø³Ø§Ø¨ Ø¬Ø¯ÙŠØ¯
// =======================
function signup(){
  const email = document.getElementById("email").value;
  const password = document.getElementById("password").value;
  auth.createUserWithEmailAndPassword(email,password)
    .then(cred=>{
      user=cred.user;
      db.collection("users").doc(user.uid).set({balance:0});
      localStorage.setItem("user-level-"+user.uid,0); // Ù…Ø³ØªÙˆÙ‰ ØªØ¬Ø±ÙŠØ¨ÙŠ
      updateUI(0);
      alert("âœ… ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø­Ø³Ø§Ø¨ Ø¨Ù†Ø¬Ø§Ø­");
    })
    .catch(err=>alert(err.message));
}

// =======================
// ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„
// =======================
function login(){
  const email = document.getElementById("email").value;
  const password = document.getElementById("password").value;
  auth.signInWithEmailAndPassword(email,password)
    .then(cred=>{
      user = cred.user;
      db.collection("users").doc(user.uid).get().then(doc=>{
        updateUI(doc.data().balance);
      });
    })
    .catch(err=>alert(err.message));
}

// =======================
// ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬
// =======================
function logout(){
  auth.signOut().then(()=>{
    user=null;
    updateUI(0);
  });
}

// Ù…ØªØ§Ø¨Ø¹Ø© ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ ØªÙ„Ù‚Ø§Ø¦ÙŠÙ‹Ø§
auth.onAuthStateChanged(u=>{
  if(u){
    user=u;
    db.collection("users").doc(user.uid).get().then(doc=>{
      updateUI(doc.data().balance);
    });
  } else {
    user=null;
    updateUI(0);
  }
});
</script>

</body>
</html>
